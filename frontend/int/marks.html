<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Учебная информационная система</title>
    <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script defer src="../js/index.js"></script>
    <style>
        /* Дополнительные стили для новых элементов */
        .filters-container {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            align-items: flex-end;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .filter-group label {
            font-size: 14px;
            color: #555;
            font-weight: 500;
        }
        
        .filter-group select {
            padding: 8px 12px;
            border-radius: 4px;
            border: 1px solid #ddd;
            background-color: #fff;
            font-size: 14px;
            min-width: 200px;
        }
        
        .btn-view {
            padding: 8px 16px;
            background-color: #4e73df;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-view:hover {
            background-color: #3a5bc7;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Сайдбар -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2><i class="fas fa-graduation-cap"></i> УИС</h2>
            </div>
            <div class="sidebar-menu">
        <div class="menu-category">Основное</div>
        <a href="index.html" class="menu-item">
            <i class="fas fa-home"></i> Главная
        </a>
        <a href="students.html" class="menu-item">
            <i class="fas fa-users"></i> Студенты
        </a>
        <a href="groups.html" class="menu-item">
            <i class="fas fa-layer-group"></i> Группы
        </a>
        <a href="dis.html" class="menu-item">
            <i class="fas fa-book"></i> Дисциплины
        </a>
        <a href="teach.html" class="menu-item">
            <i class="fas fa-chalkboard-teacher"></i> Преподаватели
        </a>
        
        <div class="menu-category">Учебный процесс</div>
        <a href="programdisteach.html" class="menu-item">
            <i class="fas fa-tasks"></i> Программы дисциплин
        </a>
        <a href="nagr.html" class="menu-item">
            <i class="fas fa-chart-bar"></i> Нагрузка
        </a>
        <a href="kons.html" class="menu-item">
            <i class="fas fa-question-circle"></i> Консультации
        </a>
        <a href="skip.html" class="menu-item">
            <i class="fas fa-user-times"></i> Пропуски
        </a>
        <a href="marks.html" class="menu-item active">
            <i class="fas fa-star"></i> Оценки
        </a>
    </div>
        </div>
        
        <!-- Основное содержимое -->
        <div class="main-content">
            <!-- Шапка -->
            <div class="header">
                <div class="header-title">
                    <h1>Главная</h1>
                    <p>Обзорная информация по учебному процессу</p>
                </div>
                <div class="header-actions">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Поиск...">
                    </div>
                    <div class="user-profile">
                        <div class="user-avatar">ИП</div>
                        <div class="user-info">
                            <div class="user-name">Иванов П.С.</div>
                            <div class="user-role">Преподаватель</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Новые элементы фильтрации -->
            <div class="content-section">
                <div class="section-header">
                    <h2>Фильтры для просмотра оценок</h2>
                </div>
                <div class="filters-container">
                    <div class="filter-group">
                        <label for="group-select">Группа</label>
                        <select id="group-select">
                            <option value="">Выберите группу</option>
                            <option value="1">ИТ-101</option>
                            <option value="2">ИТ-102</option>
                            <option value="3">ИТ-201</option>
                            <option value="4">ИТ-202</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="discipline-select">Дисциплина</label>
                        <select id="discipline-select">
                            <option value="">Выберите дисциплину</option>
                            <option value="1">Программирование</option>
                            <option value="2">Базы данных</option>
                            <option value="3">Математика</option>
                            <option value="4">Английский язык</option>
                        </select>
                    </div>
                    
                    <button class="btn-view" id="view-marks-btn">
                        <i class="fas fa-star"></i> Просмотреть оценки
                    </button>
                </div>
            </div>
            
            <div class="scroll-container">
            <table>
                <thead>
                    <tr>
                        <th rowspan="2">№</th>
                        <th rowspan="2" class="student-name">Студент</th>
                        <th rowspan="2">ср. балл</th>
                        <th class="date-header">04.09<div class="day-type">Тест</div></th>
                        <th class="date-header">05.09</th>
                        <th class="date-header">06.09</th>
                        <th class="date-header">07.09<div class="day-type">Прак</div></th>
                        <th class="date-header">08.09<div class="day-type">Доклад</div></th>
                        <th class="date-header">12.09<div class="day-type">Прак</div></th>
                        <th class="date-header">13.09<div class="day-type">Тест</div></th>
                        <th class="date-header">14.09<div class="day-type">Прак</div></th>
                        <th class="date-header">15.09</th>
                        <th class="date-header">16.09</th>
                        <th class="date-header">19.09</th>
                        <th class="date-header">21.09<div class="day-type">За мес</div></th>
                        <th class="date-header">22.09</th>
                        <th class="date-header">25.09</th>
                    </tr>
                </thead>
                <tbody id="studentsTable">
                    <tr>
                        <td class="row-number">1</td>
                        <td class="student-name"></td>
                        <td class="harv-ball">-</td>
                        <td class="grade-cell grade-2" data-grade="2">2</td>
                        <td class="grade-cell present">+</td>
                        <td class="grade-cell grade-2" data-grade="2">2</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell month-grade grade-2" data-grade="2">2</td>
                        <td class="grade-cell grade-2" data-grade="2">2</td>
                        <td class="grade-cell"></td>
                    </tr>
                    <tr>
                        <td class="row-number">2</td>
                        <td class="student-name"></td>
                        <td class="harv-ball">-</td>
                        <td class="grade-cell grade-2" data-grade="2">2</td>
                        <td class="grade-cell present">+</td>
                        <td class="grade-cell grade-3" data-grade="3">3</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-4" data-grade="4">4</td>
                        <td class="grade-cell grade-3" data-grade="3">3</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell month-grade grade-5" data-grade="5">5</td>
                    </tr>
                    <tr>
                        <td class="row-number">3</td>
                        <td class="student-name"></td>
                        <td class="harv-ball">-</td>
                        <td class="grade-cell grade-3" data-grade="3">3</td>
                        <td class="grade-cell present">+</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-4" data-grade="4">4</td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell month-grade grade-5" data-grade="5">5</td>
                    </tr>
                    <tr>
                        <td class="row-number">4</td>
                        <td class="student-name"></td>
                        <td class="harv-ball">-</td>
                        <td class="grade-cell grade-2" data-grade="2">2</td>
                        <td class="grade-cell present">+</td>
                        <td class="grade-cell grade-4" data-grade="4">4</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell month-grade grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell"></td>
                    </tr>
                    <tr>
                        <td class="row-number">5</td>
                        <td class="student-name"></td>
                        <td class="harv-ball">-</td>
                        <td class="grade-cell grade-2" data-grade="2">2</td>
                        <td class="grade-cell present">+</td>
                        <td class="grade-cell grade-3" data-grade="3">3</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell grade-3" data-grade="3">3</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell month-grade grade-5" data-grade="5">5</td>
                    </tr>
                    <tr>
                        <td class="row-number">6</td>
                        <td class="student-name"></td>
                        <td class="harv-ball">-</td>
                        <td class="grade-cell grade-2" data-grade="2">2</td>
                        <td class="grade-cell present">+</td>
                        <td class="grade-cell grade-4" data-grade="4">4</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-4" data-grade="4">4</td>
                        <td class="grade-cell grade-3" data-grade="3">3</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell month-grade grade-5" data-grade="5">5</td>
                    </tr>
                    <tr>
                        <td class="row-number">7</td>
                        <td class="student-name"></td>
                        <td class="harv-ball">-</td>
                        <td class="grade-cell grade-3" data-grade="3">3</td>
                        <td class="grade-cell present">+</td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell month-grade grade-5" data-grade="5">5</td>
                    </tr>
                    <tr>
                        <td class="row-number">8</td>
                        <td class="student-name"></td>
                        <td class="harv-ball">-</td>
                        <td class="grade-cell grade-2" data-grade="2">2</td>
                        <td class="grade-cell present">+</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell grade-4" data-grade="4">4</td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell month-grade grade-5" data-grade="5">5</td>
                    </tr>
                    <tr>
                        <td class="row-number">9</td>
                        <td class="student-name"></td>
                        <td class="harv-ball">-</td>
                        <td class="grade-cell grade-2" data-grade="2">2</td>
                        <td class="grade-cell present">+</td>
                        <td class="grade-cell grade-3" data-grade="3">3</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell grade-3" data-grade="3">3</td>
                        <td class="grade-cell month-grade grade-4" data-grade="4">4</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell"></td>
                    </tr>
                    <tr>
                        <td class="row-number">10</td>
                        <td class="student-name"></td>
                        <td class="harv-ball">-</td>
                        <td class="grade-cell grade-2" data-grade="2">2</td>
                        <td class="grade-cell present">+</td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell grade-5" data-grade="5">5</td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell"></td>
                        <td class="grade-cell month-grade grade-5" data-grade="5">5</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
        </div>
    </div>

    <script>
        const dir = '../../controllers/';
        document.addEventListener('DOMContentLoaded', function() {
            fetch(dir + 'GroupController.php?action=get')
        .then(res => {
            if (!res.ok) {
                throw new Error('Network response was not ok');
            }
            return res.json();
        })
        .then(students => {
             const tbody = document.getElementById('group-select');
            tbody.innerHTML = '<option value="">Выберите группу</option>'; // Очистка содержимого tbody
            console.log(students);
            students.forEach(student => {
                const row = `
               <option value="${student.ID}">${student.Name}</option>`;
                tbody.insertAdjacentHTML('beforeend', row);
            });
        })
        .catch(err => console.error('Failed to fetch students:', err));



        fetch(dir + 'disciplineController.php?action=get')
        .then(res => {
            if (!res.ok) {
                throw new Error('Network response was not ok');
            }
            return res.json();
        })
        .then(students => {
             const tbody = document.getElementById('discipline-select');
            tbody.innerHTML = '<option value="">Выберите дисциплину</option>'; // Очистка содержимого tbody
            console.log(students);
            students.forEach(student => {
                const row = `
               <option value="${student.ID}">${student.Name}</option>`;
                tbody.insertAdjacentHTML('beforeend', row);
            });
        })
        .catch(err => console.error('Failed to fetch students:', err));


        document.querySelector('#view-marks-btn').addEventListener('click',()=>{
            fetch(dir + 'markController.php?action=get')
        .then(res => {
            if (!res.ok) {
                throw new Error('Network response was not ok');
            }
            return res.json();
        })
        .then(students => {
             const tbody = document.getElementById('discipline-select');
            tbody.innerHTML = '<option value="">Выберите дисциплину</option>'; // Очистка содержимого tbody
            console.log(students);
            students.forEach(student => {
                const row = `
               <option value="${student.ID}">${student.Name}</option>`;
                tbody.insertAdjacentHTML('beforeend', row);
            });
        })
        .catch(err => console.error('Failed to fetch students:', err));
        })
            // Обработчики для меню
            const menuItems = document.querySelectorAll('.menu-item');
            menuItems.forEach(item => {
                item.addEventListener('click', function() {
                    menuItems.forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // Обработчик для кнопки "Просмотреть оценки"
            document.getElementById('view-marks-btn').addEventListener('click', function() {
                const groupId = document.getElementById('group-select').value;
                const disciplineId = document.getElementById('discipline-select').value;
                
                if (!groupId || !disciplineId) {
                    alert('Пожалуйста, выберите группу и дисциплину');
                    return;
                }
                
                // Здесь можно добавить логику для загрузки оценок
                console.log(`Загружаем оценки для группы ${groupId} по дисциплине ${disciplineId}`);
                // Например, перенаправление на страницу оценок с параметрами:
                // window.location.href = `marks.html?group=${groupId}&discipline=${disciplineId}`;
            });
            
            // Обработчики для модальных окон (если нужно)
            const closeModalButtons = document.querySelectorAll('.close-modal, .btn-outline');
            closeModalButtons.forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('.modal').forEach(modal => {
                        modal.style.display = 'none';
                    });
                });
            });
        });
    </script>
</body>
</html>